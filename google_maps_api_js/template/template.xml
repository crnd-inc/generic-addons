<odoo>

    <template id="assets_backend" name="crnd_map_view assets" inherit_id="web.webclient_bootstrap">
        <xpath expr="//t[@t-call-assets='web.assets_backend']" position="before">
            <script type="text/javascript" src="/google_maps_api_js/static/lib/markerclusterer/markerclusterer.min.js"/>
            <t t-set="google_maps_api_key" t-value="request.env['ir.config_parameter'].sudo().get_param('base_geolocalize.google_map_api_key')"/>
            <t t-set="user_lang" t-value="request.env.user.lang.split('_')[0]"/>
            <t t-if="google_maps_api_key">
                <script defer="defer" async="async" type="text/javascript" t-attf-src="https://maps.googleapis.com/maps/api/js?key=#{google_maps_api_key}&amp;language=#{user_lang}&amp;callback=Function.prototype"/>
            </t>
            <t t-else="">
                <script defer="defer" async="async" type="text/javascript" t-attf-src="https://maps.googleapis.com/maps/api/js?language=#{user_lang}&amp;callback=Function.prototype"/>
            </t>
        </xpath>
    </template>

</odoo>
